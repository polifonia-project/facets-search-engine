(function(){"use strict";var t={9814:function(t,e,a){var i=a(5130),n=a(6768);const s={id:"app",class:"d-flex flex-column min-vh-100 main"};function o(t,e,a,i,o,r){const l=(0,n.g2)("TopNavbar"),d=(0,n.g2)("router-view"),c=(0,n.g2)("PageFooter");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.bF)(l),(0,n.bF)(d,{class:"py-5"}),(0,n.bF)(c)])}var r=a.p+"img/logo-polifonia.0b7d20a6.svg";const l=t=>((0,n.Qi)("data-v-4a5666dc"),t=t(),(0,n.jt)(),t),d={class:"navbar navbar-expand-lg navbar-dark bg-dark text-white"},c={class:"container-fluid"},p=l((()=>(0,n.Lk)("img",{src:r,alt:""},null,-1))),u=l((()=>(0,n.Lk)("span",{id:"site_name"},"Patterns UI",-1))),h=l((()=>(0,n.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n.Lk)("span",{class:"navbar-toggler-icon"})],-1))),f={class:"collapse navbar-collapse",id:"navbarSupportedContent"},m={class:"navbar-nav me-auto mb-2 mb-lg-0"},g={class:"nav-item"},v={class:"nav-item"};function k(t,e,a,i,s,o){const r=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("nav",d,[(0,n.Lk)("div",c,[(0,n.bF)(r,{to:"/",class:"navbar-brand"},{default:(0,n.k6)((()=>[p])),_:1}),(0,n.bF)(r,{to:"/",class:"navbar-brand align-bottom pl-3 pe-4 pb-0 pt-2"},{default:(0,n.k6)((()=>[u])),_:1}),h,(0,n.Lk)("div",f,[(0,n.Lk)("ul",m,[(0,n.Lk)("li",g,[(0,n.bF)(r,{to:"/",class:"nav-link active","aria-current":"page"},{default:(0,n.k6)((()=>[(0,n.eW)("Search")])),_:1})]),(0,n.Lk)("li",v,[(0,n.bF)(r,{class:"nav-link",to:"/about"},{default:(0,n.k6)((()=>[(0,n.eW)("About")])),_:1})])])])])])}var y={name:"TopNavbar"},b=a(1241);const x=(0,b.A)(y,[["render",k],["__scopeId","data-v-4a5666dc"]]);var w=x,L=a(4232),_=a.p+"img/logo-polifonia-web-portal-white.85a4c3b0.svg",T=a.p+"img/GPLv3_Logo_white.3fef3296.svg",C=a.p+"img/polifonia_logo_without_text_white.68a9a420.svg",A=a.p+"img/x_logo_white.3c7f1f2a.svg",P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARQAAAEACAMAAABF6XnGAAACNFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+dEmAAAAAAvHRSTlMAGWekv9nz/wduyP4CXeAeyzvpWPnJpdaPb1Y+JW0iwdNGR6cKqPx1dv1QcXKbBTmt+yb6D7tXDLoOrDjHmnBPdKbAviH3mXc6GA0DBhEbPFx7xPaybC4EMGbu+KlAjuLQEk22nDOSqx+fNSrcAWoLFWOKPfFR9PVBW16Vjc4XmCQ32oMs1H4TKyPh5K6g6t9rxbXjr8zw5lK4sZBMTlocKeizFEgJiLTb5TJFKC1LlAhk3WBlYnjCxnqq8utMeeAAAAVvSURBVHgB5MFHAoQgAAPAWAPSVf7/1b3a9byZwU7Tdv0w8m+NQ9+1DfCdsZOjADdZg298iJQRg8cHKVNKTnhVZoqZC14sK+WsCx6VlYLWggdppqQ54ZbPFJU97gTKCrhhImVFg2uWwiyuVQqruNQ4CnM/du1pwdEgDMJwTdRj27Zt27Ztrnnpa0cdrLq+9zh84vwVAldZFHUWuCpZUZcMV9kUdTa4yq6os8NVDkWdA65S5AmKoAiKoAiKoPyBBEVQBEVQBEVQBEVQBEVQUlLT0jMyMzPS01JTBOVjtqxs/FB2lo0eJScOTsXlUKPk5sFl+bm8KAWFcFNhESlKcQk8VFrMiFJWDo+VlxGiVMBLlXwoVfBaFRtKeDW8Vh1OhlIDjWq4UGqhVS0TSl09tKqvI0IpgmZFRCgJ0CyBB6WhEZo1NtCgNEG7JhqUEmhXQoPSDO2aaVAyoF0GDUomtMukQWmBdi3qTyQo8vKRN1r5SJYvbwQordCulQaloQ2atTXQoKhmaNaseFAKoFkBEUpdpvwd6Vw7tGpXTCiqAxp1KC6UTp2DYZ1kKKoLXutSbCiqG17qVnwoxT3wWE8Z5WinFx7qLSadd/W5n3cVyBDw1/JyqSej/a4mo/1KUaMoNZA1+PO4eEB9SmboYZ9n6GEyQ/8PEhRBERRBERRBERRBERRBMSlBERRBGUoaHkkYzR4bn5icmq6fmZ2rml+gRnEsLi2vwKmV1TXrOifKxmZ+Ndy2srW9Q4eyG7YHL0XuH5T9RRRo5e85lVN1h0fQavA4kQXlpB7anZ4VM6AMnMOnLgaMR7nMh69dXTvMRum6gR8N2gxGid+Hf01sG4uyeAu/u2swE+X+CgH0sG4gStkSAuv8kXEoC48RaHFPDEN5+oDAe7ZgFEpiHoLRc6NQXiA4vTQI5RWC1GSSMSivqxGsYtYNQSleRvCyGIJSiiAWmWQGSnA7KhMUrU8gQXkzJCjOvX3PDj0oWxmFcRx+4z/bNgZxkG3btm3btuvkTrYuLg13W++q0V7f77mEh5R0+9qTkm4pKen2k5LBAVLSHSQl3SFSMjhMSroj0aasPnrseHf7J9VjTKm0/+CEE7X0S62Tp9Z0sVDlZkaX0vH0GaU4e66chTkfWcriC0p3cc0oC7EhqpTjl5TZ5TEWoG9MKQuuKJurK8xveDwplQ5WVHaDr5nfllhS1l5XTjOrm1uzSFIqTVIeZ/aY141IUm4qr1PmVS+OlHNyuGVO5aNI2dhGDvNWm8/tGFJWX5ZLX/NpGEPKHfksNJ/FEaSUqyKf9nfN5V4EKf3ktcZcqhZ+ysgied03lweFn/JQbltGmsejwk8pJb9j5lL4KTXktz0hKSsV4HFCUqYrQP+EpNRTgKYJSXmiAE8TklJXAYoSkvJMATYlJGWTAtRKSEp7hUhIigothRRSSCGFFFJIIYUUUkghhRRSSCGFFFJIIYUUUkghhRRSSCGFFFJIIYUUUkghhRRSSCGFFFJIIYUUUkghhRRSSCGFFFJIIYUUUkghhRT9cdnUy36pIFJ+KS6ur+fFL0x6aTZFpNgfr7THzDRzidnrzikppPSf8abVlU4pKaS8fVf5fZUPKSmkfPz0+cvXj6kppAzv2nX4XymkWKdv5k6Jl/+TFFJIIYUUUkghhRRSSCGFFFJI+U+kkEIKKd+VaN9/lgdXhxXDAAwAlRhk1xzaf9QuEPx9usMZR2kOZyylWZwxlGZwZqa0GWemRGFpwqmdwv5wLlJYxLlQKasGXCiUVXAld4rqGZfaQklLw42xUdA2cGvdKGdb8WAsFLMMPGqdUnrDC7lUyqgl450Q90QBaY8BH0zzYZ3nz/LOmnnCk3/M/rVGzrTM3QAAAABJRU5ErkJggg==",S=a.p+"img/github-mark-white.fd5c0afd.svg";const F=t=>((0,n.Qi)("data-v-aa3fef70"),t=t(),(0,n.jt)(),t),E={class:"py-5 mt-auto bg-dark-subtle text-white footer"},U={class:"container"},D={class:"row mb-4"},I=F((()=>(0,n.Lk)("div",{class:"col-md-4 mb-3"},[(0,n.Lk)("a",{href:"https://polifonia.disi.unibo.it/portal/",class:"d-flex align-items-center mb-3 link-body-emphasis text-decoration-none justify-content-center"},[(0,n.Lk)("img",{src:_,alt:""})])],-1))),R={class:"col-md-4 mb-3 px-4 d-flex justify-content-center"},N={class:"nav flex-column d-flex justify-content-center"},B={class:"nav-item mb-2 d-flex justify-content-center"},j={class:"nav-item mb-2 d-flex justify-content-center"},G={class:"col-md-4 mb-3 px-4 d-flex justify-content-center"},M={class:"row mx-0 px-0 d-flex justify-content-center"},O=F((()=>(0,n.Lk)("div",{class:"col-md-12 d-flex justify-content-center"},"Knowledge graph Version:",-1))),V={class:"col-md-12 d-flex justify-content-center"},X=(0,n.Fv)('<div class="row mb-0" data-v-aa3fef70><p style="font-size:x-small;" class="bglink d-flex justify-content-center" data-v-aa3fef70><a class="text-white mb-0" href="https://www.freepik.com/free-vector/low-poly-abstract-design_7178735.htm" data-v-aa3fef70>Background image by kjpargeter</a>Â on Freepik</p></div><div class="row" data-v-aa3fef70><div class="d-flex flex-column flex-sm-row justify-content-between border-top py-4 my-4" data-v-aa3fef70><a rel="license" href="https://www.gnu.org/licenses/gpl-3.0.en.html" class="d-flex align-items-center text-white my-4" data-v-aa3fef70><img alt="GNU GPLv3" style="border-width:0;" src="'+T+'" data-v-aa3fef70><span style="font-size:small;" class="ms-2" data-v-aa3fef70> Polifonia Patterns UI is licensed under the GNU General Public Licence version 3. </span></a><ul class="list-unstyled d-flex justify-content-center mt-4" data-v-aa3fef70><li class="ms-3" data-v-aa3fef70><a class="link-body-emphasis" href="https://polifonia-project.eu/" data-v-aa3fef70><img class="bi" width="24" height="24" src="'+C+'" title="Polifonia Web Portal" data-v-aa3fef70></a></li><li class="ms-3" data-v-aa3fef70><a class="link-body-emphasis" href="https://twitter.com/PolifoniaH2020" data-v-aa3fef70><img class="bi" width="24" height="24" src="'+A+'" title="X.com" data-v-aa3fef70></a></li><li class="ms-3" data-v-aa3fef70><a class="link-body-emphasis" href="https://linkedin.com/company/polifonia-h2020" data-v-aa3fef70><img class="bi" width="24" height="24" src="'+P+'" title="LinkedIn" data-v-aa3fef70></a></li><li class="ms-3" data-v-aa3fef70><a class="link-body-emphasis" href="https://github.com/polifonia-project" data-v-aa3fef70><img class="bi" width="24" height="24" src="'+S+'" title="Github" data-v-aa3fef70></a></li></ul></div></div>',2);function K(t,e,a,i,s,o){const r=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("footer",E,[(0,n.Lk)("div",U,[(0,n.Lk)("div",D,[I,(0,n.Lk)("div",R,[(0,n.Lk)("ul",N,[(0,n.Lk)("li",B,[(0,n.bF)(r,{class:"nav-link p-0 text-white",to:"/"},{default:(0,n.k6)((()=>[(0,n.eW)("Search")])),_:1})]),(0,n.Lk)("li",j,[(0,n.bF)(r,{class:"nav-link p-0 text-white",to:"/about"},{default:(0,n.k6)((()=>[(0,n.eW)("About")])),_:1})])])]),(0,n.Lk)("div",G,[(0,n.Lk)("div",M,[O,(0,n.Lk)("div",V,(0,L.v_)(s.KGVersion),1)])])]),X])])}var z=a(8355),Q={name:"PageFooter",data(){return{KGVersion:""}},methods:{getKGVersion(){let t=JSON.parse(sessionStorage.getItem("kg_version"));t?this.KGVersion=t:z.A.get("https://polifonia.disi.unibo.it/patterns/api/kg_version").then((t=>{let e=t.data.results.bindings;this.KGVersion=e[0].version.value,sessionStorage.setItem("kg_version",JSON.stringify(this.KGVersion))})).catch((()=>{}))}},mounted(){this.getKGVersion()}};const q=(0,b.A)(Q,[["render",K],["__scopeId","data-v-aa3fef70"]]);var J=q,$={name:"App",components:{TopNavbar:w,PageFooter:J}};const W=(0,b.A)($,[["render",o]]);var Z=W,H=a(1387);const Y=t=>((0,n.Qi)("data-v-3a57bb3d"),t=t(),(0,n.jt)(),t),tt={class:"container"},et={class:"row pt-5"},at={class:"col-8 col-xs-8"},it={key:0,class:"mb-3"},nt={key:0},st={key:1},ot={class:"mb-3 row"},rt=Y((()=>(0,n.Lk)("label",{for:"item_title",class:"col-sm-2 col-form-label"},"Title",-1))),lt={class:"col-sm-10"},dt={class:"mb-3 row"},ct=Y((()=>(0,n.Lk)("label",{for:"item_pattern",class:"col-sm-2 col-form-label"},"Pattern",-1))),pt={class:"col-sm-10"},ut={key:0},ht={class:"mb-3 row"},ft=Y((()=>(0,n.Lk)("label",{for:"item_corpus",class:"col-sm-2 col-form-label"},"Corpus",-1))),mt={class:"col-sm-10"},gt={class:"mb-3 row"},vt=Y((()=>(0,n.Lk)("label",{for:"item_key",class:"col-sm-2 col-form-label"},"Key",-1))),kt={class:"col-sm-10"},yt={class:"mb-3 row"},bt=Y((()=>(0,n.Lk)("label",{for:"item_time_signature",class:"col-sm-2 col-form-label"},"Time Signature",-1))),xt={class:"col-sm-10"},wt={class:"mb-3 row"},Lt=Y((()=>(0,n.Lk)("label",{for:"item_tune_type",class:"col-sm-2 col-form-label"},"Tune Type",-1))),_t={class:"col-sm-10"},Tt={class:"col-4 col-xs-4 my-1"},Ct={class:"row p-0"},At={class:"col-md-6 col-xs-12"},Pt={class:"dropdown col-md-6 col-xs-12 my-1"},St=Y((()=>(0,n.Lk)("option",{class:"dropdown-item",value:"title"},"Title",-1))),Ft=Y((()=>(0,n.Lk)("option",{class:"dropdown-item",value:"pattern"},"Pattern",-1))),Et=Y((()=>(0,n.Lk)("option",{class:"dropdown-item",value:"advanced"},"Advanced",-1))),Ut=[St,Ft,Et],Dt={class:"row"},It={key:0,class:"table table-hover"},Rt=Y((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Name"),(0,n.Lk)("th",null,"ID"),(0,n.Lk)("th",null,"Tune Type"),(0,n.Lk)("th",null,"Key"),(0,n.Lk)("th",null,"Time Signature")])],-1))),Nt=["onClick"],Bt={key:0};function jt(t,e,a,s,o,r){const l=(0,n.g2)("Multiselect");return(0,n.uX)(),(0,n.CE)("div",tt,[(0,n.Lk)("div",et,[(0,n.Lk)("div",at,[r.advanced_search?((0,n.uX)(),(0,n.CE)("div",st,[(0,n.Lk)("div",ot,[rt,(0,n.Lk)("div",lt,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"item_title","onUpdate:modelValue":e[2]||(e[2]=t=>o.title=t),placeholder:"",onKeydown:e[3]||(e[3]=(0,i.jR)(((...t)=>r.search&&r.search(...t)),["enter"]))},null,544),[[i.Jo,o.title]])])]),(0,n.Lk)("div",dt,[ct,(0,n.Lk)("div",pt,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"item_pattern","onUpdate:modelValue":e[4]||(e[4]=t=>o.pattern=t),onKeydown:e[5]||(e[5]=(0,i.jR)(((...t)=>r.search&&r.search(...t)),["enter"]))},null,544),[[i.Jo,o.pattern]]),o.valid_pattern?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",ut,"Valid pattern delimiters: _ , -"))])]),(0,n.Lk)("div",ht,[ft,(0,n.Lk)("div",mt,[(0,n.bF)(l,{id:"item_corpus",modelValue:o.corpus,"onUpdate:modelValue":e[6]||(e[6]=t=>o.corpus=t),options:o.corpusOptions,mode:"tags","close-on-select":!1,searchable:"true","clear-on-select":!1,"preserve-search":!0,placeholder:"Filter...",onKeydown:(0,i.jR)(r.search,["enter"])},null,8,["modelValue","options","onKeydown"])])]),(0,n.Lk)("div",gt,[vt,(0,n.Lk)("div",kt,[(0,n.bF)(l,{id:"item_key",modelValue:o.key,"onUpdate:modelValue":e[7]||(e[7]=t=>o.key=t),options:o.keyOptions,mode:"tags","close-on-select":!1,searchable:"true","clear-on-select":!1,"preserve-search":!0,placeholder:"Filter...",onKeydown:(0,i.jR)(r.search,["enter"])},null,8,["modelValue","options","onKeydown"])])]),(0,n.Lk)("div",yt,[bt,(0,n.Lk)("div",xt,[(0,n.bF)(l,{id:"item_time_signature",modelValue:o.timeSignature,"onUpdate:modelValue":e[8]||(e[8]=t=>o.timeSignature=t),options:o.timeSignatureOptions,mode:"tags","close-on-select":!1,searchable:"true","clear-on-select":!1,"preserve-search":!0,placeholder:"Filter...",onKeydown:(0,i.jR)(r.search,["enter"])},null,8,["modelValue","options","onKeydown"])])]),(0,n.Lk)("div",wt,[Lt,(0,n.Lk)("div",_t,[(0,n.bF)(l,{id:"item_tune_type",modelValue:o.tuneType,"onUpdate:modelValue":e[9]||(e[9]=t=>o.tuneType=t),options:o.tuneTypeOptions,mode:"tags","close-on-select":!1,searchable:"true","clear-on-select":!1,"preserve-search":!0,placeholder:"Filter...",onKeydown:(0,i.jR)(r.search,["enter"])},null,8,["modelValue","options","onKeydown"])])])])):((0,n.uX)(),(0,n.CE)("div",it,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>o.searchTerm=t),onKeydown:e[1]||(e[1]=(0,i.jR)(((...t)=>r.search&&r.search(...t)),["enter"])),placeholder:"Search..."},null,544),[[i.Jo,o.searchTerm]]),o.valid_pattern?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",nt,"Valid pattern delimiters: _ , - "))]))]),(0,n.Lk)("div",Tt,[(0,n.Lk)("div",Ct,[(0,n.Lk)("div",At,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[10]||(e[10]=t=>r.search())},"Search")]),(0,n.Lk)("div",Pt,[(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[11]||(e[11]=t=>o.searchType=t)},Ut,512),[[i.u1,o.searchType]])])])])]),(0,n.Lk)("div",Dt,[o.searchResults.length>0?((0,n.uX)(),(0,n.CE)("table",It,[Rt,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.searchResults,((t,e)=>((0,n.uX)(),(0,n.CE)("tr",{key:e,onClick:e=>r.openDetails(t.id.value)},[(0,n.Lk)("td",null,(0,L.v_)(t.title.value?t.title.value.replace(/^(.*?)(?:, The)$/,"The $1"):"Unknown"),1),(0,n.Lk)("td",null,(0,L.v_)(this.formatID(t.id.value)),1),(0,n.Lk)("td",null,(0,L.v_)("tuneType"in t&&t.tuneType.value?t.tuneType.value:"Unknown"),1),(0,n.Lk)("td",null,(0,L.v_)("key"in t&&t.key.value?t.key.value.replace(/^(.)(.*)$/,"$1 $2"):"Unknown"),1),(0,n.Lk)("td",null,(0,L.v_)("signature"in t&&t.signature.value?t.signature.value:"Unknown"),1)],8,Nt)))),128))])])):(0,n.Q3)("",!0)]),o.noResults?((0,n.uX)(),(0,n.CE)("div",Bt," No results ")):(0,n.Q3)("",!0)])}a(4114);var Gt=a(4014),Mt={name:"HomeSearchPage",components:{Multiselect:Gt.A},data(){return{searchTerm:"",searchResults:[],searchType:"title",title:"",pattern:"",corpus:[],corpusOptions:[],key:[],keyOptions:[],timeSignature:[],timeSignatureOptions:[],tuneType:[],tuneTypeOptions:[],noResults:!1,valid_pattern:!0}},methods:{formatID(t){let e="";return e=t.includes("thesession")?"S":t.includes("MTC")?"M":t.split("/")[0].substring(0,3).toUpperCase(),e+t.split("/").pop()},search(){let t={};t=this.advanced_search?{searchType:this.searchType,pattern:this.pattern,title:this.title,corpus:JSON.parse(JSON.stringify(this.corpus)),key:JSON.parse(JSON.stringify(this.key.map((t=>"Unknown"===t?"":t.replace(/^(.)\s(.*)$/,"$1$2"))))),timeSignature:JSON.parse(JSON.stringify(this.timeSignature)),tuneType:JSON.parse(JSON.stringify(this.tuneType))}:{searchType:this.searchType,searchTerm:this.searchTerm},this.noResults=!1,Object.values(Object.fromEntries(Object.entries(t).filter((t=>"searchType"!==t[0])))).every((t=>null===t||""===t||0===t.length))?this.noResults=!0:this.ValidPattern(t)?("pattern"===t.searchType?t.searchTerm=this.searchTerm.replaceAll(/[_, -]\s*/g,", "):"advanced"===t.searchType&&(t.pattern=this.pattern.replaceAll(/[_, -]\s*/g,", ")),this.$router.push({name:"HomeSearchPage",query:t})):this.noResults=!1},ValidPattern(t){return"pattern"===t.searchType?this.valid_pattern=this.pattern_validation(t.searchTerm):"advanced"===t.searchType?""===t.pattern?this.valid_pattern=!0:this.valid_pattern=this.pattern_validation(t.pattern):this.valid_pattern=!0,this.valid_pattern},searchRequest(t){z.A.get("https://polifonia.disi.unibo.it/patterns/api/search",{params:t,paramsSerializer:{indexes:null}}).then((t=>{this.searchResults=t.data.results.bindings,this.noResults=0===this.searchResults.length})).catch((t=>{console.error(t)}))},openDetails(t){this.$router.push({name:"CompositionPage",params:{id:encodeURIComponent(t)}})},pattern_validation(t){let e=/^[0-9](?:(?:,\s|[_ ,-])[0-9]){3,}$/;return e.test(t)},getCorpusList(){let t=JSON.parse(sessionStorage.getItem("corpus"));t?this.corpusOptions=t:z.A.get("https://polifonia.disi.unibo.it/patterns/api/corpus_list").then((t=>{this.corpusOptions=t.data.map((t=>t||"Unknown")),sessionStorage.setItem("corpus",JSON.stringify(this.corpusOptions))})).catch((()=>{}))},getKeyList(){let t=JSON.parse(sessionStorage.getItem("key"));t?this.keyOptions=t:z.A.get("https://polifonia.disi.unibo.it/patterns/api/keys_list").then((t=>{this.keyOptions=t.data.map((t=>t?t.replace(/^(.)(.*)$/,"$1 $2"):"Unknown")),sessionStorage.setItem("key",JSON.stringify(this.keyOptions))})).catch((()=>{}))},getTimeSigList(){let t=JSON.parse(sessionStorage.getItem("timeSignature"));t?this.timeSignatureOptions=t:z.A.get("https://polifonia.disi.unibo.it/patterns/api/time_sig_list").then((t=>{this.timeSignatureOptions=t.data.map((t=>t||"Unknown")),sessionStorage.setItem("timeSignature",JSON.stringify(this.timeSignatureOptions))})).catch((()=>{}))},getTuneTypeList(){let t=JSON.parse(sessionStorage.getItem("tuneType"));t?this.tuneTypeOptions=t:z.A.get("https://polifonia.disi.unibo.it/patterns/api/tune_type_list").then((t=>{this.tuneTypeOptions=t.data.map((t=>t||"Unknown")),sessionStorage.setItem("tuneType",JSON.stringify(this.tuneTypeOptions))})).catch((()=>{}))}},computed:{advanced_search(){return"advanced"===this.searchType}},mounted(){this.noResults=!1,0!==Object.keys(this.$route.query).length&&this.searchRequest(this.$route.query),this.getCorpusList(),this.getKeyList(),this.getTimeSigList(),this.getTuneTypeList()},watch:{$route(){this.noResults=!1,0!==Object.keys(this.$route.query).length&&this.searchRequest(this.$route.query)}}};const Ot=(0,b.A)(Mt,[["render",jt],["__scopeId","data-v-3a57bb3d"]]);var Vt=Ot;const Xt={class:"container-fluid"},Kt={class:"row mb-3"},zt={class:"row"},Qt={class:"row"},qt={class:"col-12"},Jt={class:"row"},$t={key:0},Wt={class:"row"},Zt={key:0},Ht=["href"],Yt={class:"row"},te={class:"row px-1 py-2 justify-content-center"},ee={class:"col-lg-2 col-md-6 px-4 mb-4"},ae={class:"row"},ie={key:0,class:"table table-hover mt-3"},ne=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Pattern"),(0,n.Lk)("th",null,"#")])],-1),se=["onClick"],oe={class:"row"},re={class:"form-check form-switch"},le=(0,n.Lk)("label",{class:"form-check-label",for:"item_exclude_trivial_patterns"},"Exclude Trivial Patterns",-1),de={key:0,class:"col-lg-2 col-md-6 px-4 mb-4"},ce={class:"row"},pe={key:0,class:"table table-hover mt-3"},ue=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Pattern")])],-1),he=["onClick"],fe={key:1},me={class:"row"},ge={class:"form-check form-switch"},ve=(0,n.Lk)("label",{class:"form-check-label",for:"item_exclude_trivial_patterns_diff"},"Exclude Trivial Patterns",-1),ke={class:"col-lg-8 col-md-12 px-4"},ye={class:"row px-3 mb-2"},be={class:"form-check form-switch"},xe=(0,n.Lk)("label",{class:"form-check-label",for:"item_net_vis_show_pattterns"},"Show Pattern Nodes",-1),we={class:"row"},Le={key:0,id:"nav-explore"},_e={key:1,id:"nav-common-patterns"};function Te(t,e,a,s,o,r){const l=(0,n.g2)("router-link"),d=(0,n.g2)("citationGenerator"),c=(0,n.g2)("NetworkGraph"),p=(0,n.g2)("NetworkGraphCommonPatterns");return(0,n.uX)(),(0,n.CE)("div",Xt,[(0,n.Lk)("div",Kt,[(0,n.Lk)("div",zt,[(0,n.Lk)("h1",null,(0,L.v_)(o.title.replace(/^(.*?)(?:, The)$/,"The $1")),1)]),(0,n.Lk)("div",Qt,[(0,n.Lk)("div",qt," Tune ID: "+(0,L.v_)(this.formatID(o.id)),1)]),(0,n.Lk)("div",Jt,["Unknown"!==this.tuneFamily?((0,n.uX)(),(0,n.CE)("div",$t,[(0,n.bF)(l,{class:"nav-link p-0",to:"/family/"+this.tuneFamily},{default:(0,n.k6)((()=>[(0,n.eW)("Tune Family: "+(0,L.v_)(o.tuneFamily.replaceAll("_"," ")),1)])),_:1},8,["to"])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Wt,[this.link?((0,n.uX)(),(0,n.CE)("div",Zt,[(0,n.Lk)("a",{class:"nav-link p-0",href:o.link},"More Information",8,Ht)])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Yt,[(0,n.bF)(d,{pageTitle:o.pageTitle},null,8,["pageTitle"])])]),(0,n.Lk)("div",te,[(0,n.Lk)("div",ee,[(0,n.Lk)("div",ae,[(0,n.Lk)("h6",null,'Patterns contained in "'+(0,L.v_)(o.title.replace(/^(.*?)(?:, The)$/,"The $1"))+'" ('+(0,L.v_)(this.formatID(o.id))+")",1),o.ptnData.length>0?((0,n.uX)(),(0,n.CE)("table",ie,[ne,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.ptnData,((t,e)=>((0,n.uX)(),(0,n.CE)("tr",{key:e,onClick:e=>r.toPatternPage(t.pattern.value)},[(0,n.Lk)("td",null,(0,L.v_)(t.pattern.value),1),(0,n.Lk)("td",null,(0,L.v_)(t.patternFreq.value),1)],8,se)))),128))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",oe,[(0,n.Lk)("div",re,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.exclude_trivial_patterns=t),class:"form-check-input",type:"checkbox",id:"item_exclude_trivial_patterns",checked:""},null,512),[[i.lH,o.exclude_trivial_patterns]]),le])])]),o.prev?((0,n.uX)(),(0,n.CE)("div",de,[(0,n.Lk)("div",ce,[(0,n.Lk)("h6",null,'Patterns in common between "'+(0,L.v_)(o.title.replace(/^(.*?)(?:, The)$/,"The $1"))+'" ('+(0,L.v_)(this.formatID(o.id))+') and "'+(0,L.v_)(o.prevTitle.replace(/^(.*?)(?:, The)$/,"The $1"))+'" ('+(0,L.v_)(this.formatID(o.prev))+")",1),o.cmnPtnData.length>0?((0,n.uX)(),(0,n.CE)("table",pe,[ue,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.cmnPtnData,((t,e)=>((0,n.uX)(),(0,n.CE)("tr",{key:e,onClick:e=>r.toPatternPage(t.pattern.value)},[(0,n.Lk)("td",null,(0,L.v_)(t.pattern.value),1)],8,he)))),128))])])):((0,n.uX)(),(0,n.CE)("div",fe," No patterns in common. "))]),(0,n.Lk)("div",me,[(0,n.Lk)("div",ge,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.exclude_trivial_patterns_diff=t),class:"form-check-input",type:"checkbox",id:"item_exclude_trivial_patterns_diff",checked:""},null,512),[[i.lH,o.exclude_trivial_patterns_diff]]),ve])])])):(0,n.Q3)("",!0),(0,n.Lk)("div",ke,[(0,n.Lk)("div",ye,[(0,n.Lk)("div",be,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.net_vis_show_pattterns=t),class:"form-check-input",type:"checkbox",id:"item_net_vis_show_pattterns",checked:""},null,512),[[i.lH,o.net_vis_show_pattterns]]),xe])]),(0,n.Lk)("div",we,[o.net_vis_show_pattterns?((0,n.uX)(),(0,n.CE)("div",Le,[o.childDataLoaded?((0,n.uX)(),(0,n.Wv)(c,{key:0,id:o.id,tuneData:o.tuneData,exclude_trivial_patterns:o.exclude_trivial_patterns,onChangeComposition:r.changeTune},null,8,["id","tuneData","exclude_trivial_patterns","onChangeComposition"])):(0,n.Q3)("",!0)])):((0,n.uX)(),(0,n.CE)("div",_e,[o.childDataLoaded?((0,n.uX)(),(0,n.Wv)(p,{key:0,id:o.id,tuneData:o.tuneData,exclude_trivial_patterns:o.exclude_trivial_patterns,onChangeComposition:r.changeTune},null,8,["id","tuneData","exclude_trivial_patterns","onChangeComposition"])):(0,n.Q3)("",!0)]))])])])])}const Ce={id:"svg1",width:"100%",height:"100%",style:{border:"1px solid black","background-color":"white"},viewBox:"0 0 1000 700",class:"container-border col-lg-12"},Ae=(0,n.Fv)('<defs><radialGradient id="black" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#cccccc"></stop><stop offset="100%" stop-color="#000000"></stop></radialGradient><radialGradient id="orange" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#ffeec7"></stop><stop offset="100%" stop-color="#E69F00"></stop></radialGradient><radialGradient id="sky_blue" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#ddf0fb"></stop><stop offset="100%" stop-color="#56B4E9"></stop></radialGradient><radialGradient id="bluish_green" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#b9ffec"></stop><stop offset="100%" stop-color="#009E73"></stop></radialGradient><radialGradient id="yellow" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#fcfad9"></stop><stop offset="100%" stop-color="#F0E442"></stop></radialGradient><radialGradient id="blue" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#bde7ff"></stop><stop offset="100%" stop-color="#0072B2"></stop></radialGradient><radialGradient id="vermilion" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#ffdec4"></stop><stop offset="100%" stop-color="#D55E00"></stop></radialGradient><radialGradient id="reddish_purple" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="1%"><stop offset="0%" stop-color="#f5e4ed"></stop><stop offset="100%" stop-color="#CC79A7"></stop></radialGradient><radialGradient id="grey" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="1%"><stop offset="0%" stop-color="#e6e6e6"></stop><stop offset="100%" stop-color="#737373"></stop></radialGradient><filter id="shadow" filterUnits="objectBoundingBox" x="-10%" y="-10%" width="300%" height="300%" color-interpolation-filters="sRGB"><feDropShadow dx="5" dy="5" stdDeviation="3" flood-color="shadow" flood-opacity="0.5"></feDropShadow></filter></defs>',1),Pe=[Ae];function Se(t,e,a,i,s,o){return(0,n.uX)(),(0,n.CE)("svg",Ce,Pe)}var Fe=a(3464),Ee={name:"NetworkGraph",props:["id","tuneData","exclude_trivial_patterns"],data(){return{graphData:{nodes:[],links:[]},svg:void 0,width:void 0,height:void 0,simulation:void 0,link:void 0,node:void 0,label:void 0,g:void 0,colourDict:{},currentColour:-1,colourList:{0:"orange",1:"sky_blue",2:"bluish_green",3:"yellow",4:"blue",5:"vermilion",6:"reddish_purple"},colours:{black:"#000000",orange:"#E69F00",sky_blue:"#56B4E9",bluish_green:"#009E73",yellow:"#F0E442",blue:"#0072B2",vermilion:"#D55E00",reddish_purple:"#CC79A7"},tune_radius:24,pattern_radius:16,label_spacing:6,label_size:"15px",clickedNodes:[],numNodesAdded:[],numLinksAdded:[]}},methods:{formatID(t){let e="";return e=t.includes("thesession")?"S":t.includes("MTC")?"M":t.split("/")[0].substring(0,3).toUpperCase(),e+t.split("/").pop()},init(){let t=this;this.svg=Fe.Ltv("#svg1"),this.width=1e3,this.height=700,this.simulation=Fe.tXi().force("link",Fe.kJC().id((t=>t.id)).distance(160).strength(1)).force("charge",Fe.xJS().strength(-300)).force("center",Fe.jTM(this.width/2,this.height/2)).force("collision",Fe.eRw().radius(60)),this.g=this.svg.append("g").attr("class","everything"),this.link=this.g.append("g").selectAll(".link"),this.node=this.g.append("g").selectAll(".node"),this.label=this.g.append("g").selectAll(".label");let e=this.svg.append("g");function a(){if(t.clickedNodes.length>0){let e=t.numNodesAdded.pop();while(e--)t.graphData.nodes.pop();e=t.numLinksAdded.pop();while(e--)t.graphData.links.pop();let a=t.clickedNodes.pop();t.graphData.nodes.find((t=>t.id===a)).clicks--,t.update()}}e.append("path").attr("d","M23.94624 27.25376a1.28 1.28 0 0 1-1.81312 1.81312l-7.68-7.68a1.28 1.28 0 0 1 0-1.81312l7.68-7.68a1.28 1.28 0 1 1 1.81312 1.81312L17.16992 20.48l6.77632 6.77376zM20.48 40.96A20.48 20.48 0 1 1 20.48 0a20.48 20.48 0 0 1 0 40.96zm0-2.56a17.92 17.92 0 1 0 0-35.84 17.92 17.92 0 0 0 0 35.84z").attr("fill","black"),e.append("circle").attr("r","20.48").attr("cx","20.48").attr("cy","20.48").attr("fill-opacity","0"),e.on("click",a);let i=this.svg.append("g").attr("transform","scale(0.04) translate(0, 1044)");function n(){t.graphData.nodes=[],t.graphData.links=[],t.numNodesAdded=[],t.numLinksAdded=[],t.clickedNodes=[],t.addFirstNode(),t.update()}i.append("path").attr("transform","scale(0.85) translate(80, 153.6)").attr("d","M146.358 714 C219.143 847.474 360.001 934 517 934 c212.963 0 391.858 -158.66 418.579 -367.974 c3.077 -24.104 25.112 -41.15 49.217 -38.074 c24.105 3.078 41.152 25.113 38.074 49.218 C990.558 830.286 774.393 1022 517 1022 c-173.766 0 -331.173 -87.715 -424 -226.4 V911 c0 24.3 -19.7 44 -44 44 S5 935.3 5 911 V670 c0 -24.3 19.7 -44 44 -44 h241 c24.3 0 44 19.7 44 44 s-19.7 44 -44 44 H146.358z m736.284 -404 C809.857 176.526 668.999 90 512 90 C299.037 90 120.142 248.66 93.421 457.974 c-3.077 24.104 -25.112 41.15 -49.217 38.074 C20.099 492.97 3.052 470.935 6.13 446.83 C38.442 193.714 254.607 2 512 2 c173.766 0 331.173 87.715 424 226.4 V113 c0 -24.3 19.7 -44 44 -44 s44 19.7 44 44 v241 c0 24.3 -19.7 44 -44 44 H739 c-24.3 0 -44 -19.7 -44 -44 s19.7 -44 44 -44 h143.642z").attr("fill","black"),i.append("circle").attr("r","512").attr("cx","512").attr("cy","512").attr("fill-opacity","0").attr("fill","red"),i.on("click",n),this.tutorial_panes();let s=this.svg.append("g").attr("transform","scale(1) translate(950, 0)");function o(){document.getElementById("tut0").setAttribute("display","true")}s.append("path").attr("d","M24,2A22,22,0,1,0,46,24,21.9,21.9,0,0,0,24,2Zm0,40A18,18,0,1,1,42,24,18.1,18.1,0,0,1,24,42Z M24,38h-.4l-.4-.2h-.3l-.3-.3-.3-.3c0-.1-.1-.2-.2-.3s0-.3-.1-.4v-.8c.1-.1.1-.2.1-.4s.2-.2.2-.3l.3-.3a1.9,1.9,0,0,1,1.8-.6h.4l.3.2.3.3.3.3c0,.1.1.2.1.3s.1.3.2.4v.8c-.1.1-.1.2-.2.4s-.1.2-.1.3l-.3.3-.3.3h-.3l-.4.2Z M24.4,30h-.8a2,2,0,0,1-1.1-2.6,7.3,7.3,0,0,1,3.6-3.9A4.9,4.9,0,0,0,25,14.1a5.3,5.3,0,0,0-4.2,1A5.3,5.3,0,0,0,19,18.9a2,2,0,0,1-4,0,8.8,8.8,0,0,1,3.3-6.8,8.8,8.8,0,0,1,7.5-1.9,8.9,8.9,0,0,1,2,16.8,3.7,3.7,0,0,0-1.6,1.7A1.9,1.9,0,0,1,24.4,30Z").attr("fill","black"),s.append("circle").attr("r","23").attr("cx","24").attr("cy","24").attr("fill-opacity","0").attr("fill","red"),s.on("click",o)},update(){let t=this;this.link=this.link.data(this.graphData.links,(t=>t.id)),this.link.exit().remove();const e=this.link.enter().append("line").attr("class","link").attr("stroke-width",4).style("stroke","#9b9b9b");this.link=e.merge(this.link),this.node=this.node.data(this.graphData.nodes),this.node.exit().remove();const a=this.node.enter().append("circle").attr("class","node").attr("r",d).attr("stroke-width",3).attr("fill",(t=>"url(#"+t.colour+")")).attr("filter","url(#shadow)").call(this.drag(this.simulation));this.node=a.merge(this.node),this.node.append("title").text((t=>t.family)),this.label=this.label.data(this.graphData.nodes),this.label.exit().remove();const i=this.label.enter().append("text").text((t=>t.name)).attr("class","label").attr("x",(t=>t.x)).attr("y",this.labelLocation).style("text-anchor","middle").style("fill","black").style("font-family","Arial").style("font-size",this.label_size).style("pointer-events","none");this.label=i.merge(this.label),this.simulation.nodes(this.graphData.nodes).on("tick",this.tick),this.simulation.force("link").links(this.graphData.links),this.simulation.alpha(.1).restart(),this.node.on("click",r).on("dblclick",l);let n=Fe.s_O().on("zoom",s);function s(e){t.g.attr("transform",e.transform)}n(this.svg),this.svg.on("dblclick.zoom",null);let o=null;function r(e,a){clearTimeout(o),o=setTimeout((()=>{a.moreNeighbours?(t.addNode(a,this),a.clicks++):t.noNeighboursFeedback(this)}),300)}function l(e,a){clearTimeout(o),"tune"===a.type?a.id!==t.id&&t.$router.push({name:"CompositionPage",params:{id:encodeURIComponent(a.id),prev:encodeURIComponent(t.id),prevTitle:t.tuneData[0].title.value}}):"pattern"===a.type?t.$router.push({name:"PatternPage",params:{pattern:a.id}}):console.error("Invalid node type.")}function d(e){return"tune"===e.type?t.tune_radius:t.pattern_radius}},noNeighboursFeedback(t){Fe.Ltv(t).attr("stroke","red"),Fe.Ltv(t).transition().duration(500).attr("stroke","black")},labelLocation(t){return"tune"===t.type?t.y-this.tune_radius-this.label_spacing:t.y-this.pattern_radius-this.label_spacing},tick(){this.link.attr("x1",(t=>t.source.x)).attr("y1",(t=>t.source.y)).attr("x2",(t=>t.target.x)).attr("y2",(t=>t.target.y)),this.node.attr("cx",(t=>t.x)).attr("cy",(t=>t.y)),this.label.attr("x",(t=>t.x)).attr("y",this.labelLocation)},drag(t){function e(e,a){e.active||t.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y}function a(t,e){e.fx=t.x,e.fy=t.y}function i(e,a){e.active||t.alphaTarget(0),a.fx=null,a.fy=null}return Fe.$Er().on("start",e).on("drag",a).on("end",i)},tutorial_panes(){let t=this,e=[[["Node Types"],["Tune nodes are large, coloured nodes.",""],["Pattern nodes are smaller, black nodes.",""]],[["Single-Clicking"],["Single-clicking a node expands","five additional neighbour nodes."],["If a node has no more neighbours,","a red ring will flash around the node."]],[["Double-Clicking"],["Double-clicking a node navigates to the","selected node's tune or pattern page."],["If a tune node is double-clicked, the center","panel appears, which shows patterns in","common between the current tune and the","previous tune."]],[["Tune Family"],["A tune node's colour represents","its tune family."],["The name of its tune family can be","shown by hovering over the node.","Try with the node shown on the left."]],[["Zoom and Pan"],["Zoom the visualisation by scrolling. Pan the","visualisation by dragging the background."],["All nodes can be dragged to reorient the","network."]],[["Visualisation Types"],["The default visualisation type shows tunes","linked to patterns they contain."],["Pattern nodes can be hidden by toggling the","'Show Pattern Nodes' slider to show tunes","linked to similar tunes based on common","patterns."]],[["Back and Reset Buttons"],["Undo an expansion by clicking the","'back' button in the top left corner."],["Reset the visualisation by clicking the","'reset' button below the 'back' button.",""]]],a=e.length,i=this.svg.append("g").attr("class","tutorial");for(let l=0;l<a;l++)n(i,l,e[l],a);function n(e,a,i,n){let l=e.append("g").attr("class","tut"+a).attr("id","tut"+a).attr("display","none");l.append("rect").attr("x","100").attr("y","100").attr("width","800").attr("height","400").attr("rx","15").attr("fill","white").attr("stroke","black"),l.append("text").attr("x","300").attr("y","150").attr("font-size","200%").text(i[0]);let d=l.append("text").attr("x","300").attr("y","200");for(let t in i[1])d.append("tspan").attr("x","300").attr("dy","1.2em").attr("font-size","150%").text(i[1][t]);let c=l.append("text").attr("x","300").attr("y","365");for(let t in i[2])c.append("tspan").attr("x","300").attr("dy","1.2em").attr("font-size","150%").text(i[2][t]);if(a>0){let t=l.append("g").attr("transform","scale(-0.2, 0.2) translate(-800, 1300)");t.append("path").attr("d","M233.252,155.997L120.752,6.001c-4.972-6.628-14.372-7.97-21-3c-6.628,4.971-7.971,14.373-3,21l105.75,140.997L96.752,306.001c-4.971,6.627-3.627,16.03,3,21c2.698,2.024,5.856,3.001,8.988,3.001c4.561,0,9.065-2.072,12.012-6.001l112.5-150.004C237.252,168.664,237.252,161.33,233.252,155.997z").attr("fill","black"),t.append("rect").attr("x","90").attr("y","0").attr("width","145").attr("height","330").attr("fill-opacity","0").attr("fill","red"),t.on("click",s)}if(a<n-1){let t=l.append("g").attr("transform","scale(0.2, 0.2) translate(4200, 1300)");t.append("path").attr("d","M233.252,155.997L120.752,6.001c-4.972-6.628-14.372-7.97-21-3c-6.628,4.971-7.971,14.373-3,21l105.75,140.997L96.752,306.001c-4.971,6.627-3.627,16.03,3,21c2.698,2.024,5.856,3.001,8.988,3.001c4.561,0,9.065-2.072,12.012-6.001l112.5-150.004C237.252,168.664,237.252,161.33,233.252,155.997z").attr("fill","black"),t.append("rect").attr("x","90").attr("y","0").attr("width","145").attr("height","330").attr("fill-opacity","0").attr("fill","red"),t.on("click",o)}let p=l.append("g").attr("transform","translate(850, 110) scale(1.3, 1.3)");if(p.append("path").attr("d","M16 0c-8.836 0-16 7.163-16 16s7.163 16 16 16c8.837 0 16-7.163 16-16s-7.163-16-16-16zM16 30.032c-7.72 0-14-6.312-14-14.032s6.28-14 14-14 14 6.28 14 14-6.28 14.032-14 14.032zM21.657 10.344c-0.39-0.39-1.023-0.39-1.414 0l-4.242 4.242-4.242-4.242c-0.39-0.39-1.024-0.39-1.415 0s-0.39 1.024 0 1.414l4.242 4.242-4.242 4.242c-0.39 0.39-0.39 1.024 0 1.414s1.024 0.39 1.415 0l4.242-4.242 4.242 4.242c0.39 0.39 1.023 0.39 1.414 0s0.39-1.024 0-1.414l-4.242-4.242 4.242-4.242c0.391-0.391 0.391-1.024 0-1.414z").attr("fill","black"),p.append("circle").attr("r","16").attr("cx","16").attr("cy","16").attr("fill-opacity","0").attr("fill","red"),p.on("click",r),0==a)l.append("circle").attr("r",t.tune_radius).attr("cx","200").attr("cy","220").attr("stroke-width",3).attr("fill","url(#orange)").attr("filter","url(#shadow)"),l.append("circle").attr("r",t.pattern_radius).attr("cx","200").attr("cy","385").attr("stroke-width",3).attr("fill","url(#black)").attr("filter","url(#shadow)");else if(1==a)l.append("circle").attr("r",t.tune_radius).attr("cx","190").attr("cy","385").attr("stroke-width",3).attr("fill","url(#orange)").attr("filter","url(#shadow)").attr("stroke","red"),l.append("circle").attr("id","blah1").attr("r",t.pattern_radius).attr("cx","250").attr("cy","385").attr("stroke-width",3).attr("fill","url(#black)").attr("filter","url(#shadow)").attr("stroke","red");else if(3==a){let e=l.append("circle").attr("r",t.tune_radius).attr("cx","200").attr("cy","385").attr("stroke-width",3).attr("fill","url(#orange)").attr("filter","url(#shadow)");e.append("title").text("Family")}else 6==a&&(l.append("path").attr("transform","translate(200, 220)  scale(1.2)").attr("d","M23.94624 27.25376a1.28 1.28 0 0 1-1.81312 1.81312l-7.68-7.68a1.28 1.28 0 0 1 0-1.81312l7.68-7.68a1.28 1.28 0 1 1 1.81312 1.81312L17.16992 20.48l6.77632 6.77376zM20.48 40.96A20.48 20.48 0 1 1 20.48 0a20.48 20.48 0 0 1 0 40.96zm0-2.56a17.92 17.92 0 1 0 0-35.84 17.92 17.92 0 0 0 0 35.84z").attr("fill","black"),l.append("path").attr("transform","translate(205, 375) scale(0.04)").attr("d","M146.358 714 C219.143 847.474 360.001 934 517 934 c212.963 0 391.858 -158.66 418.579 -367.974 c3.077 -24.104 25.112 -41.15 49.217 -38.074 c24.105 3.078 41.152 25.113 38.074 49.218 C990.558 830.286 774.393 1022 517 1022 c-173.766 0 -331.173 -87.715 -424 -226.4 V911 c0 24.3 -19.7 44 -44 44 S5 935.3 5 911 V670 c0 -24.3 19.7 -44 44 -44 h241 c24.3 0 44 19.7 44 44 s-19.7 44 -44 44 H146.358z m736.284 -404 C809.857 176.526 668.999 90 512 90 C299.037 90 120.142 248.66 93.421 457.974 c-3.077 24.104 -25.112 41.15 -49.217 38.074 C20.099 492.97 3.052 470.935 6.13 446.83 C38.442 193.714 254.607 2 512 2 c173.766 0 331.173 87.715 424 226.4 V113 c0 -24.3 19.7 -44 44 -44 s44 19.7 44 44 v241 c0 24.3 -19.7 44 -44 44 H739 c-24.3 0 -44 -19.7 -44 -44 s19.7 -44 44 -44 h143.642z").attr("fill","black"))}function s(t){let e=t.target.parentNode.parentNode,a="tut"+(parseInt(e.id.slice(3))-1),i=document.getElementById(a);i?(e.setAttribute("display","none"),i.setAttribute("display","true")):console.log("Next pane does not exist.")}function o(t){let e=t.target.parentNode.parentNode,a="tut"+(parseInt(e.id.slice(3))+1),i=document.getElementById(a);i?(e.setAttribute("display","none"),i.setAttribute("display","true")):console.log("Next pane does not exist.")}function r(t){var e=t.target.parentNode.parentNode;e.setAttribute("display","none")}},addNode(t,e){let a,i;"tune"===t.type?(a={id:t.id,click_num:t.clicks,excludeTrivialPatterns:!1},i="/api/neighbour_patterns"):(a={id:t.id,click_num:t.clicks},i="/api/neighbour_tunes"),z.A.get("https://polifonia.disi.unibo.it/patterns"+i,{params:a}).then((a=>{let i,n,s,o,r,l,d=a.data.results.bindings,c=d.length,p=[],u=c;for(let e in d){p[e]=!0,i="tune"===t.type?d[e].pattern.value:d[e].id.value;for(let t in this.graphData.nodes)this.graphData.nodes[t].id===i&&(p[e]=!1,u--)}if(0===c||1===c&&!1===p[0])return t.moreNeighbours=!1,void this.noNeighboursFeedback(e);this.clickedNodes.push(t.id),this.numNodesAdded.push(u);for(let e in d)if(p[e]){if("tune"===t.type)n=d[e].pattern.value,s=d[e].pattern.value,o=d[e].pattern.value.replaceAll("_"," "),r="black",l="pattern";else{let t;t="family"in d[e]&&d[e].family.value?d[e].family.value.replaceAll("_"," "):"Unknown",n=d[e].id.value,s=this.formatTitle(d[e].title.value,d[e].id.value),o=t,r=this.selectColour(t),l="tune"}let a={id:n,name:s,family:o,colour:r,type:l,moreNeighbours:!0,clicks:0,x:t.x+10*Math.cos(e/u*2*Math.PI),y:t.y+10*Math.sin(e/u*2*Math.PI)};this.graphData.nodes.push(a)}this.getLinks(t,d),this.update()})).catch((t=>{console.error(t)}))},getLinks(t,e){let a=0;for(let i in e){let n;n="pattern"===t.type?e[i].id.value:e[i].pattern.value;let s=[t.id,n].sort().join(""),o=!0;for(let t in this.graphData.links)this.graphData.links[t].id===s&&(o=!1);o&&(this.graphData.links.push({source:t.id,target:n,id:s}),a++)}this.numLinksAdded.push(a)},selectColour(t){let e;return t in this.colourDict?e=this.colourDict[t]:"Unknown"==t?e="grey":(this.currentColour=(this.currentColour+1)%7,e=this.colourList[this.currentColour],this.colourDict[t]=e),e},formatTitle(t,e){return t.replace(/^(.*?)(?:, The)$/,"The $1")+" ("+this.formatID(e)+")"},addFirstNode(){let t;t="tuneFamily"in this.tuneData[0]&&this.tuneData[0].tuneFamily.value?this.tuneData[0].tuneFamily.value.replaceAll("_"," "):"Unknown";let e=this.selectColour(t),a={id:this.id,name:this.formatTitle(this.tuneData[0].title.value,this.id),family:t,colour:e,type:"tune",moreNeighbours:!0,clicks:0};this.graphData.nodes.push(a),this.addNode(a,this)}},mounted(){this.init(),this.addFirstNode()},watch:{$route(){this.$emit("changeComposition")}}};const Ue=(0,b.A)(Ee,[["render",Se]]);var De=Ue;const Ie={id:"svg2",width:"100%",height:"100%",style:{border:"1px solid black","background-color":"white"},viewBox:"0 0 1000 700",class:"container-border col-lg-12"},Re=(0,n.Fv)('<defs><radialGradient id="black" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#cccccc"></stop><stop offset="100%" stop-color="#000000"></stop></radialGradient><radialGradient id="orange" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#ffeec7"></stop><stop offset="100%" stop-color="#E69F00"></stop></radialGradient><radialGradient id="sky_blue" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#ddf0fb"></stop><stop offset="100%" stop-color="#56B4E9"></stop></radialGradient><radialGradient id="bluish_green" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#b9ffec"></stop><stop offset="100%" stop-color="#009E73"></stop></radialGradient><radialGradient id="yellow" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#fcfad9"></stop><stop offset="100%" stop-color="#F0E442"></stop></radialGradient><radialGradient id="blue" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#bde7ff"></stop><stop offset="100%" stop-color="#0072B2"></stop></radialGradient><radialGradient id="vermilion" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="0%"><stop offset="0%" stop-color="#ffdec4"></stop><stop offset="100%" stop-color="#D55E00"></stop></radialGradient><radialGradient id="reddish_purple" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="1%"><stop offset="0%" stop-color="#f5e4ed"></stop><stop offset="100%" stop-color="#CC79A7"></stop></radialGradient><radialGradient id="grey" filterUnits="objectBoundingBox" cx="40%" cy="40%" r="50%" fx="40%" fy="40%" fr="1%"><stop offset="0%" stop-color="#e6e6e6"></stop><stop offset="100%" stop-color="#737373"></stop></radialGradient><filter id="shadow" filterUnits="objectBoundingBox" x="-10%" y="-10%" width="300%" height="300%" color-interpolation-filters="sRGB"><feDropShadow dx="5" dy="5" stdDeviation="3" flood-color="shadow" flood-opacity="0.5"></feDropShadow></filter></defs>',1),Ne=[Re];function Be(t,e,a,i,s,o){return(0,n.uX)(),(0,n.CE)("svg",Ie,Ne)}var je={name:"NetworkGraphCommonPatterns",props:["id","tuneData","exclude_trivial_patterns"],data(){return{graphData:{nodes:[],links:[]},svg:void 0,width:void 0,height:void 0,simulation:void 0,link:void 0,node:void 0,label:void 0,g:void 0,colourDict:{},currentColour:-1,colourList:{0:"orange",1:"sky_blue",2:"bluish_green",3:"yellow",4:"blue",5:"vermilion",6:"reddish_purple"},colours:{black:"#000000",orange:"#E69F00",sky_blue:"#56B4E9",bluish_green:"#009E73",yellow:"#F0E442",blue:"#0072B2",vermilion:"#D55E00",reddish_purple:"#CC79A7"},tune_radius:24,pattern_radius:16,label_spacing:6,label_size:"15px",clickedNodes:[],numNodesAdded:[],numLinksAdded:[]}},methods:{formatID(t){let e="";return e=t.includes("thesession")?"S":t.includes("MTC")?"M":t.split("/")[0].substring(0,3).toUpperCase(),e+t.split("/").pop()},init(){let t=this;this.svg=Fe.Ltv("#svg2"),this.width=1e3,this.height=700,this.simulation=Fe.tXi().force("link",Fe.kJC().id((t=>t.id)).distance(160).strength(1)).force("charge",Fe.xJS().strength(-300)).force("center",Fe.jTM(this.width/2,this.height/2)).force("collision",Fe.eRw().radius(60)),this.g=this.svg.append("g").attr("class","everything"),this.link=this.g.append("g").selectAll(".link"),this.node=this.g.append("g").selectAll(".node"),this.label=this.g.append("g").selectAll(".label");let e=this.svg.append("g");function a(){if(t.clickedNodes.length>0){let e=t.numNodesAdded.pop();while(e--)t.graphData.nodes.pop();e=t.numLinksAdded.pop();while(e--)t.graphData.links.pop();let a=t.clickedNodes.pop();t.graphData.nodes.find((t=>t.id===a)).clicks--,t.update()}}e.append("path").attr("d","M23.94624 27.25376a1.28 1.28 0 0 1-1.81312 1.81312l-7.68-7.68a1.28 1.28 0 0 1 0-1.81312l7.68-7.68a1.28 1.28 0 1 1 1.81312 1.81312L17.16992 20.48l6.77632 6.77376zM20.48 40.96A20.48 20.48 0 1 1 20.48 0a20.48 20.48 0 0 1 0 40.96zm0-2.56a17.92 17.92 0 1 0 0-35.84 17.92 17.92 0 0 0 0 35.84z").attr("fill","black"),e.append("circle").attr("r","20.48").attr("cx","20.48").attr("cy","20.48").attr("fill-opacity","0"),e.on("click",a);let i=this.svg.append("g").attr("transform","scale(0.04) translate(0, 1044)");function n(){t.graphData.nodes=[],t.graphData.links=[],t.numNodesAdded=[],t.numLinksAdded=[],t.clickedNodes=[],t.addFirstNode(),t.update()}i.append("path").attr("d","M146.358 714 C219.143 847.474 360.001 934 517 934 c212.963 0 391.858 -158.66 418.579 -367.974 c3.077 -24.104 25.112 -41.15 49.217 -38.074 c24.105 3.078 41.152 25.113 38.074 49.218 C990.558 830.286 774.393 1022 517 1022 c-173.766 0 -331.173 -87.715 -424 -226.4 V911 c0 24.3 -19.7 44 -44 44 S5 935.3 5 911 V670 c0 -24.3 19.7 -44 44 -44 h241 c24.3 0 44 19.7 44 44 s-19.7 44 -44 44 H146.358z m736.284 -404 C809.857 176.526 668.999 90 512 90 C299.037 90 120.142 248.66 93.421 457.974 c-3.077 24.104 -25.112 41.15 -49.217 38.074 C20.099 492.97 3.052 470.935 6.13 446.83 C38.442 193.714 254.607 2 512 2 c173.766 0 331.173 87.715 424 226.4 V113 c0 -24.3 19.7 -44 44 -44 s44 19.7 44 44 v241 c0 24.3 -19.7 44 -44 44 H739 c-24.3 0 -44 -19.7 -44 -44 s19.7 -44 44 -44 h143.642z").attr("fill","black"),i.append("circle").attr("r","512").attr("cx","512").attr("cy","512").attr("fill-opacity","0").attr("fill","red"),i.on("click",n),this.tutorial_panes();let s=this.svg.append("g").attr("transform","scale(1) translate(950, 0)");function o(){document.getElementById("tut0").setAttribute("display","true")}s.append("path").attr("d","M24,2A22,22,0,1,0,46,24,21.9,21.9,0,0,0,24,2Zm0,40A18,18,0,1,1,42,24,18.1,18.1,0,0,1,24,42Z M24,38h-.4l-.4-.2h-.3l-.3-.3-.3-.3c0-.1-.1-.2-.2-.3s0-.3-.1-.4v-.8c.1-.1.1-.2.1-.4s.2-.2.2-.3l.3-.3a1.9,1.9,0,0,1,1.8-.6h.4l.3.2.3.3.3.3c0,.1.1.2.1.3s.1.3.2.4v.8c-.1.1-.1.2-.2.4s-.1.2-.1.3l-.3.3-.3.3h-.3l-.4.2Z M24.4,30h-.8a2,2,0,0,1-1.1-2.6,7.3,7.3,0,0,1,3.6-3.9A4.9,4.9,0,0,0,25,14.1a5.3,5.3,0,0,0-4.2,1A5.3,5.3,0,0,0,19,18.9a2,2,0,0,1-4,0,8.8,8.8,0,0,1,3.3-6.8,8.8,8.8,0,0,1,7.5-1.9,8.9,8.9,0,0,1,2,16.8,3.7,3.7,0,0,0-1.6,1.7A1.9,1.9,0,0,1,24.4,30Z").attr("fill","black"),s.append("circle").attr("r","23").attr("cx","24").attr("cy","24").attr("fill-opacity","0").attr("fill","red"),s.on("click",o)},update(){let t=this;this.link=this.link.data(this.graphData.links,(t=>t.id)),this.link.exit().remove();const e=this.link.enter().append("line").attr("class","link").attr("stroke-width",4).style("stroke","#9b9b9b");this.link=e.merge(this.link),this.node=this.node.data(this.graphData.nodes),this.node.exit().remove();const a=this.node.enter().append("circle").attr("class","node").attr("r",d).attr("stroke-width",3).attr("fill",(t=>"url(#"+t.colour+")")).attr("filter","url(#shadow)").call(this.drag(this.simulation));this.node=a.merge(this.node),this.node.append("title").text((t=>t.family)),this.label=this.label.data(this.graphData.nodes),this.label.exit().remove();const i=this.label.enter().append("text").text((t=>t.name)).attr("class","label").attr("x",(t=>t.x)).attr("y",this.labelLocation).style("text-anchor","middle").style("fill","black").style("font-family","Arial").style("font-size",this.label_size).style("pointer-events","none");this.label=i.merge(this.label),this.simulation.nodes(this.graphData.nodes).on("tick",this.tick),this.simulation.force("link").links(this.graphData.links),this.simulation.alpha(.1).restart(),this.node.on("click",r).on("dblclick",l);let n=Fe.s_O().on("zoom",s);function s(e){t.g.attr("transform",e.transform)}n(this.svg),this.svg.on("dblclick.zoom",null);let o=null;function r(e,a){clearTimeout(o),o=setTimeout((()=>{a.moreNeighbours?(t.addNode(a,this),a.clicks++):t.noNeighboursFeedback(this)}),300)}function l(e,a){clearTimeout(o),a.id!==t.id&&t.$router.push({name:"CompositionPage",params:{id:encodeURIComponent(a.id),prev:encodeURIComponent(t.id),prevTitle:t.tuneData[0].title.value}})}function d(e){return"tune"===e.type?t.tune_radius:t.pattern_radius}},noNeighboursFeedback(t){Fe.Ltv(t).attr("stroke","red"),Fe.Ltv(t).transition().duration(500).attr("stroke","black")},labelLocation(t){return"tune"===t.type?t.y-this.tune_radius-this.label_spacing:t.y-this.pattern_radius-this.label_spacing},tick(){this.link.attr("x1",(t=>t.source.x)).attr("y1",(t=>t.source.y)).attr("x2",(t=>t.target.x)).attr("y2",(t=>t.target.y)),this.node.attr("cx",(t=>t.x)).attr("cy",(t=>t.y)),this.label.attr("x",(t=>t.x)).attr("y",this.labelLocation)},drag(t){function e(e,a){e.active||t.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y}function a(t,e){e.fx=t.x,e.fy=t.y}function i(e,a){e.active||t.alphaTarget(0),a.fx=null,a.fy=null}return Fe.$Er().on("start",e).on("drag",a).on("end",i)},tutorial_panes(){let t=this,e=[[["Node Types"],["Tune nodes are large, coloured nodes.",""],["Pattern nodes are smaller, black nodes.",""]],[["Single-Clicking"],["Single-clicking a node expands","five additional neighbour nodes."],["If a node has no more neighbours,","a red ring will flash around the node."]],[["Double-Clicking"],["Double-clicking a node navigates to the","selected node's tune or pattern page."],["If a tune node is double-clicked, the center","panel appears, which shows patterns in","common between the current tune and the","previous tune."]],[["Tune Family"],["A tune node's colour represents","its tune family."],["The name of its tune family can be","shown by hovering over the node."]],[["Zoom and Pan"],["Zoom the visualisation by scrolling. Pan the","visualisation by dragging the background."],["All nodes can be dragged to reorient the","network."]],[["Visualisation Types"],["The default visualisation type shows tunes","linked to patterns they contain."],["Pattern nodes can be hidden by toggling the","'Show Pattern Nodes' slider to show tunes","linked to similar tunes based on common","patterns."]],[["Back and Reset Buttons"],["Undo an expansion by clicking the","'back' button in the top left corner."],["Reset the visualisation by clicking the","'reset' button below the 'back' button.",""]]],a=e.length,i=this.svg.append("g").attr("class","tutorial");for(let l=0;l<a;l++)n(i,l,e[l],a);function n(e,a,i,n){let l=e.append("g").attr("class","tut"+a).attr("id","tut"+a).attr("display","none");l.append("rect").attr("x","100").attr("y","100").attr("width","800").attr("height","400").attr("rx","15").attr("fill","white").attr("stroke","black"),l.append("text").attr("x","300").attr("y","150").attr("font-size","200%").text(i[0]);let d=l.append("text").attr("x","300").attr("y","200");for(let t in i[1])d.append("tspan").attr("x","300").attr("dy","1.2em").attr("font-size","150%").text(i[1][t]);let c=l.append("text").attr("x","300").attr("y","365");for(let t in i[2])c.append("tspan").attr("x","300").attr("dy","1.2em").attr("font-size","150%").text(i[2][t]);if(a>0){let t=l.append("g").attr("transform","scale(-0.2, 0.2) translate(-800, 1300)");t.append("path").attr("d","M233.252,155.997L120.752,6.001c-4.972-6.628-14.372-7.97-21-3c-6.628,4.971-7.971,14.373-3,21l105.75,140.997L96.752,306.001c-4.971,6.627-3.627,16.03,3,21c2.698,2.024,5.856,3.001,8.988,3.001c4.561,0,9.065-2.072,12.012-6.001l112.5-150.004C237.252,168.664,237.252,161.33,233.252,155.997z").attr("fill","black"),t.append("rect").attr("x","90").attr("y","0").attr("width","145").attr("height","330").attr("fill-opacity","0").attr("fill","red"),t.on("click",s)}if(a<n-1){let t=l.append("g").attr("transform","scale(0.2, 0.2) translate(4200, 1300)");t.append("path").attr("d","M233.252,155.997L120.752,6.001c-4.972-6.628-14.372-7.97-21-3c-6.628,4.971-7.971,14.373-3,21l105.75,140.997L96.752,306.001c-4.971,6.627-3.627,16.03,3,21c2.698,2.024,5.856,3.001,8.988,3.001c4.561,0,9.065-2.072,12.012-6.001l112.5-150.004C237.252,168.664,237.252,161.33,233.252,155.997z").attr("fill","black"),t.append("rect").attr("x","90").attr("y","0").attr("width","145").attr("height","330").attr("fill-opacity","0").attr("fill","red"),t.on("click",o)}let p=l.append("g").attr("transform","translate(850, 110) scale(1.3, 1.3)");if(p.append("path").attr("d","M16 0c-8.836 0-16 7.163-16 16s7.163 16 16 16c8.837 0 16-7.163 16-16s-7.163-16-16-16zM16 30.032c-7.72 0-14-6.312-14-14.032s6.28-14 14-14 14 6.28 14 14-6.28 14.032-14 14.032zM21.657 10.344c-0.39-0.39-1.023-0.39-1.414 0l-4.242 4.242-4.242-4.242c-0.39-0.39-1.024-0.39-1.415 0s-0.39 1.024 0 1.414l4.242 4.242-4.242 4.242c-0.39 0.39-0.39 1.024 0 1.414s1.024 0.39 1.415 0l4.242-4.242 4.242 4.242c0.39 0.39 1.023 0.39 1.414 0s0.39-1.024 0-1.414l-4.242-4.242 4.242-4.242c0.391-0.391 0.391-1.024 0-1.414z").attr("fill","black"),p.append("circle").attr("r","16").attr("cx","16").attr("cy","16").attr("fill-opacity","0").attr("fill","red"),p.on("click",r),0==a)l.append("circle").attr("r",t.tune_radius).attr("cx","200").attr("cy","220").attr("stroke-width",3).attr("fill","url(#orange)").attr("filter","url(#shadow)"),l.append("circle").attr("r",t.pattern_radius).attr("cx","200").attr("cy","385").attr("stroke-width",3).attr("fill","url(#black)").attr("filter","url(#shadow)");else if(1==a)l.append("circle").attr("r",t.tune_radius).attr("cx","190").attr("cy","385").attr("stroke-width",3).attr("fill","url(#orange)").attr("filter","url(#shadow)").attr("stroke","red"),l.append("circle").attr("id","blah1").attr("r",t.pattern_radius).attr("cx","250").attr("cy","385").attr("stroke-width",3).attr("fill","url(#black)").attr("filter","url(#shadow)").attr("stroke","red");else if(3==a){let e=l.append("circle").attr("r",t.tune_radius).attr("cx","200").attr("cy","385").attr("stroke-width",3).attr("fill","url(#orange)").attr("filter","url(#shadow)");e.append("title").text("Family")}else 6==a&&(l.append("path").attr("transform","translate(200, 220)  scale(1.2)").attr("d","M23.94624 27.25376a1.28 1.28 0 0 1-1.81312 1.81312l-7.68-7.68a1.28 1.28 0 0 1 0-1.81312l7.68-7.68a1.28 1.28 0 1 1 1.81312 1.81312L17.16992 20.48l6.77632 6.77376zM20.48 40.96A20.48 20.48 0 1 1 20.48 0a20.48 20.48 0 0 1 0 40.96zm0-2.56a17.92 17.92 0 1 0 0-35.84 17.92 17.92 0 0 0 0 35.84z").attr("fill","black"),l.append("path").attr("transform","translate(205, 375) scale(0.04)").attr("d","M146.358 714 C219.143 847.474 360.001 934 517 934 c212.963 0 391.858 -158.66 418.579 -367.974 c3.077 -24.104 25.112 -41.15 49.217 -38.074 c24.105 3.078 41.152 25.113 38.074 49.218 C990.558 830.286 774.393 1022 517 1022 c-173.766 0 -331.173 -87.715 -424 -226.4 V911 c0 24.3 -19.7 44 -44 44 S5 935.3 5 911 V670 c0 -24.3 19.7 -44 44 -44 h241 c24.3 0 44 19.7 44 44 s-19.7 44 -44 44 H146.358z m736.284 -404 C809.857 176.526 668.999 90 512 90 C299.037 90 120.142 248.66 93.421 457.974 c-3.077 24.104 -25.112 41.15 -49.217 38.074 C20.099 492.97 3.052 470.935 6.13 446.83 C38.442 193.714 254.607 2 512 2 c173.766 0 331.173 87.715 424 226.4 V113 c0 -24.3 19.7 -44 44 -44 s44 19.7 44 44 v241 c0 24.3 -19.7 44 -44 44 H739 c-24.3 0 -44 -19.7 -44 -44 s19.7 -44 44 -44 h143.642z").attr("fill","black"))}function s(t){let e=t.target.parentNode.parentNode,a="tut"+(parseInt(e.id.slice(3))-1),i=document.getElementById(a);i?(e.setAttribute("display","none"),i.setAttribute("display","true")):console.log("Next pane does not exist.")}function o(t){let e=t.target.parentNode.parentNode,a="tut"+(parseInt(e.id.slice(3))+1),i=document.getElementById(a);i?(e.setAttribute("display","none"),i.setAttribute("display","true")):console.log("Next pane does not exist.")}function r(t){var e=t.target.parentNode.parentNode;e.setAttribute("display","none")}},addNode(t,e){let a={id:t.id,click_num:t.clicks},i="/api/neighbour_tunes_by_common_patterns";z.A.get("https://polifonia.disi.unibo.it/patterns"+i,{params:a}).then((a=>{let i,n=a.data.results.bindings,s=n.length,o=[],r=s;for(let t in n){o[t]=!0,i=n[t].id.value;for(let e in this.graphData.nodes)this.graphData.nodes[e].id===i&&(o[t]=!1,r--)}if(0===s||1===s&&!1===o[0])return t.moreNeighbours=!1,void this.noNeighboursFeedback(e);this.clickedNodes.push(t.id),this.numNodesAdded.push(r);for(let e in n)if(o[e]){let a;a="family"in n[e]&&n[e].family.value?n[e].family.value.replaceAll("_"," "):"Unknown";let i={id:n[e].id.value,name:n[e].title.value.replace(/^(.*?)(?:, The)$/,"The $1")+" ("+this.formatID(n[e].id.value)+")",family:a,colour:this.selectColour(a),type:"tune",moreNeighbours:!0,clicks:0,x:t.x+10*Math.cos(e/r*2*Math.PI),y:t.y+10*Math.sin(e/r*2*Math.PI)};this.graphData.nodes.push(i)}this.getLinks(t,n),this.update()})).catch((t=>{console.error(t)}))},getLinks(t,e){let a=0;for(let i in e){let n=e[i].id.value,s=[t.id,n].sort().join(""),o=!0;for(let t in this.graphData.links)this.graphData.links[t].id===s&&(o=!1);o&&(this.graphData.links.push({source:t.id,target:n,id:s}),a++)}this.numLinksAdded.push(a)},selectColour(t){let e;return t in this.colourDict?e=this.colourDict[t]:"Unknown"==t?e="grey":(this.currentColour=(this.currentColour+1)%7,e=this.colourList[this.currentColour],this.colourDict[t]=e),e},addFirstNode(){let t;t="tuneFamily"in this.tuneData[0]&&this.tuneData[0].tuneFamily.value?this.tuneData[0].tuneFamily.value.replaceAll("_"," "):"Unknown";let e=this.selectColour(t),a={id:this.id,name:this.tuneData[0].title.value.replace(/^(.*?)(?:, The)$/,"The $1")+" ("+this.formatID(this.id)+")",family:t,colour:e,type:"tune",moreNeighbours:!0,clicks:0};this.graphData.nodes.push(a),this.addNode(a,this)}},mounted(){this.init(),this.addFirstNode()},watch:{$route(){this.$emit("changeComposition")}}};const Ge=(0,b.A)(je,[["render",Be]]);var Me=Ge,Oe=a.p+"img/cite.e9f2c7dc.svg";const Ve=t=>((0,n.Qi)("data-v-240d186f"),t=t(),(0,n.jt)(),t),Xe={class:"citationWindow"},Ke={class:"d-inline-flex gap-1"},ze=Ve((()=>(0,n.Lk)("img",{class:"bi",width:"24",height:"24",src:Oe,alt:""},null,-1))),Qe={class:"collapse",id:"collapseExample"},qe={class:"card card-body"},Je={class:"row"},$e={class:"col-4"},We={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},Ze=Ve((()=>(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"vbtn-radio1"},"APA",-1))),He=Ve((()=>(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"vbtn-radio2"},"MLA",-1))),Ye=Ve((()=>(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"vbtn-radio3"},"Harvard",-1))),ta=Ve((()=>(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"vbtn-radio4"},"Bibtex",-1))),ea={class:"col-8"},aa={class:"row"},ia={class:"mb-3"},na={class:"row"};function sa(t,e,a,i,s,o){return(0,n.uX)(),(0,n.CE)("div",Xe,[(0,n.Lk)("p",Ke,[(0,n.Lk)("a",{onClick:e[0]||(e[0]=t=>o.generateCitation("APA")),class:"btn btn-primary","data-bs-toggle":"collapse",href:"#collapseExample",role:"button","aria-expanded":"false","aria-controls":"collapseExample"},[ze,(0,n.eW)(" Cite ")])]),(0,n.Lk)("div",Qe,[(0,n.Lk)("div",qe,[(0,n.Lk)("div",Je,[(0,n.Lk)("div",$e,[(0,n.Lk)("div",We,[(0,n.Lk)("input",{onClick:e[1]||(e[1]=t=>o.generateCitation("APA")),type:"radio",class:"btn-check",name:"vbtn-radio",id:"vbtn-radio1",autocomplete:"off",checked:""}),Ze,(0,n.Lk)("input",{onClick:e[2]||(e[2]=t=>o.generateCitation("MLA")),type:"radio",class:"btn-check",name:"vbtn-radio",id:"vbtn-radio2",autocomplete:"off"}),He,(0,n.Lk)("input",{onClick:e[3]||(e[3]=t=>o.generateCitation("Harvard")),type:"radio",class:"btn-check",name:"vbtn-radio",id:"vbtn-radio3",autocomplete:"off"}),Ye,(0,n.Lk)("input",{onClick:e[4]||(e[4]=t=>o.generateCitation("Bibtex")),type:"radio",class:"btn-check",name:"vbtn-radio",id:"vbtn-radio4",autocomplete:"off"}),ta])]),(0,n.Lk)("div",ea,[(0,n.Lk)("div",aa,[(0,n.Lk)("div",ia,[(0,n.Lk)("p",null,(0,L.v_)(s.citation),1)])]),(0,n.Lk)("div",na,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=t=>o.copyCiteToClipboard())},"Copy")])])])])])])}a(4603),a(7566),a(8721);var oa={name:"citationGenerator",props:["pageTitle"],data(){return{citation:""}},methods:{generateCitation(t){let e=new URL(location.href).href,a=JSON.parse(sessionStorage.getItem("kg_version")),i=new Date;const n={day:"numeric",month:"long",year:"numeric"};let s=i.toLocaleString("default",n),o="2024";"APA"===t?this.citation="Polifonia Project. ("+o+"). Patterns UI: "+this.pageTitle+" ("+a+"). "+e:"MLA"===t?this.citation='Polifonia Project. "Patterns UI: '+this.pageTitle+'." Polifonia Project, '+a+", "+o+", "+e.replace(/(^\w+:|^)\/\//,""):"Harvard"===t?this.citation="Polifonia Project (2024): Patterns UI: "+this.pageTitle+", Polifonia Project, [online]. "+a+". "+e+" [accessed "+s+"].":"Bibtex"===t&&(this.citation="@online{patternsUI,\n  author = {Polifonia Project},\n  title = {Patterns UI: "+this.pageTitle+" },\n  year = 2024,\n  url = {"+e+"},\n  note = {Accessed: "+s+"}\n}")},copyCiteToClipboard(){navigator.clipboard.writeText(this.citation)}}};const ra=(0,b.A)(oa,[["render",sa],["__scopeId","data-v-240d186f"]]);var la=ra,da={name:"CompositionPage",components:{CitationGenerator:la,NetworkGraph:De,NetworkGraphCommonPatterns:Me},data(){return{ptnData:[],cmnPtnData:[],tuneData:[],title:"",tuneFamily:"",link:"",exclude_trivial_patterns:!0,exclude_trivial_patterns_diff:!0,id:decodeURIComponent(this.$route.params.id),prev:void 0,prevTitle:void 0,childDataLoaded:!1,pageTitle:"",net_vis_show_pattterns:!0}},methods:{formatID(t){let e="";return e=t.includes("thesession")?"S":t.includes("MTC")?"M":t.split("/")[0].substring(0,3).toUpperCase(),e+t.split("/").pop()},getTuneData(t){let e={id:t};z.A.get("https://polifonia.disi.unibo.it/patterns/api/tune_by_id",{params:e}).then((t=>{this.tuneData=t.data.results.bindings,this.childDataLoaded=!0,this.title=this.tuneData[0].title.value,this.tuneFamily="tuneFamily"in this.tuneData[0]&&this.tuneData[0].tuneFamily.value?this.tuneData[0].tuneFamily.value:"Unknown",this.link="link"in this.tuneData[0]?this.tuneData[0].link.value:"Undefined",this.pageTitle=this.title.replace(/^(.*?)(?:, The)$/,"The $1")+" ("+this.formatID(this.id)+")"})).catch((t=>{console.error(t)}))},getPatterns(t,e){let a={id:t,excludeTrivialPatterns:e};z.A.get("https://polifonia.disi.unibo.it/patterns/api/patterns",{params:a}).then((t=>{this.ptnData=t.data.results.bindings})).catch((t=>{console.error(t)}))},getPatternsInCommon(t,e,a){let i={id:t,prev:e,excludeTrivialPatterns:a};z.A.get("https://polifonia.disi.unibo.it/patterns/api/common_patterns",{params:i}).then((t=>{this.cmnPtnData=t.data.results.bindings})).catch((t=>{console.error(t)}))},toPatternPage(t){let e=t.split("/").pop();this.$router.push({name:"PatternPage",params:{pattern:e}})},changeTune(){this.id=decodeURIComponent(this.$route.params.id),this.prev=decodeURIComponent(this.$route.params.prev),this.prevTitle=this.$route.params.prevTitle,this.init()},init(){this.getTuneData(this.id),this.getPatterns(this.id,!0),this.prev&&this.getPatternsInCommon(this.id,this.prev,this.exclude_trivial_patterns_diff)}},mounted(){this.$route.params.prev&&(this.prev=decodeURIComponent(this.$route.params.prev),this.prevTitle=this.$route.params.prevTitle),this.init()},watch:{exclude_trivial_patterns(){this.getPatterns(this.id,this.exclude_trivial_patterns)},exclude_trivial_patterns_diff(){this.prev&&this.getPatternsInCommon(this.id,this.prev,this.exclude_trivial_patterns_diff)}}};const ca=(0,b.A)(da,[["render",Te]]);var pa=ca;const ua=t=>((0,n.Qi)("data-v-bd93682a"),t=t(),(0,n.jt)(),t),ha={class:"container"},fa={class:"row"},ma={class:"row"},ga=ua((()=>(0,n.Lk)("div",{class:"row"},[(0,n.Lk)("div",{id:"notation",class:"stave"})],-1))),va=ua((()=>(0,n.Lk)("div",{class:"row"},[(0,n.Lk)("div",{id:"audio",class:"stave"})],-1))),ka={class:"row my-5"},ya={key:0,class:"table table-hover mt-3"},ba=ua((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Tune"),(0,n.Lk)("th",null,"ID")])],-1))),xa=["onClick"];function wa(t,e,a,i,s,o){const r=(0,n.g2)("citationGenerator");return(0,n.uX)(),(0,n.CE)("div",ha,[(0,n.Lk)("div",fa,[(0,n.Lk)("h1",null,"Pattern: "+(0,L.v_)(s.pattern),1)]),(0,n.Lk)("div",ma,[(0,n.bF)(r,{pageTitle:s.pageTitle},null,8,["pageTitle"])]),ga,va,(0,n.Lk)("div",ka,[(0,n.Lk)("h5",null,'Tunes Containing the Pattern "'+(0,L.v_)(this.pattern)+'"',1),s.tuneData.length>0?((0,n.uX)(),(0,n.CE)("table",ya,[ba,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.tuneData,((t,e)=>((0,n.uX)(),(0,n.CE)("tr",{key:e,onClick:e=>o.toCompositionPage(t.id.value)},[(0,n.Lk)("td",null,(0,L.v_)("title"in t&&t.title.value?t.title.value.replace(/^(.*?)(?:, The)$/,"The $1"):"Unknown"),1),(0,n.Lk)("td",null,(0,L.v_)(this.formatID(t.id.value)),1)],8,xa)))),128))])])):(0,n.Q3)("",!0)])])}var La=a(5393),_a=a.n(La),Ta={name:"PatternPage",components:{CitationGenerator:la},data(){return{tuneData:[],pattern:this.$route.params.pattern,melody:"",pageTitle:""}},methods:{formatID(t){let e="";return e=t.includes("thesession")?"S":t.includes("MTC")?"M":t.split("/")[0].substring(0,3).toUpperCase(),e+t.split("/").pop()},toCompositionPage(t){this.$router.push({name:"CompositionPage",params:{id:encodeURIComponent(t)}})},getTunesList(t){let e={pattern:t};z.A.get("https://polifonia.disi.unibo.it/patterns/api/tunes_by_pattern",{params:e}).then((t=>{this.tuneData=t.data.results.bindings})).catch((t=>{console.error(t)}))},createABC(){let t={0:"c",1:"d",2:"e",3:"f",4:"g",5:"a",6:"b"},e="X:1\nT:\nM:C\nK:C\nQ: 1/4=100\n",a=this.pattern.split(", ");for(let i in a)e+=t[(a[i]-1)%7]+" ";e+="]",this.melody=e},setupABC(){if(_a().synth.supportsAudio()){this.createABC();let t=_a().renderAbc("notation",this.melody)[0],e=new(_a().synth.SynthController);e.load("#audio",null,{displayRestart:!0,displayPlay:!0,displayProgress:!0}),e.setTune(t,!1)}else document.querySelector("#audio").innerHTML="<div class='audio-error'>Audio is not supported in this browser.</div>"}},mounted(){this.pageTitle="Pattern: '"+this.pattern+"'",this.getTunesList(this.pattern),this.setupABC()}};const Ca=(0,b.A)(Ta,[["render",wa],["__scopeId","data-v-bd93682a"]]);var Aa=Ca;const Pa={class:"container"},Sa={class:"row"},Fa={class:"row"},Ea={class:"row my-4"},Ua={class:"col-12"},Da={key:0,class:"table table-hover mt-3"},Ia=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Name"),(0,n.Lk)("th",null,"ID"),(0,n.Lk)("th",null,"Type")])],-1),Ra=["onClick"];function Na(t,e,a,i,s,o){const r=(0,n.g2)("citationGenerator");return(0,n.uX)(),(0,n.CE)("div",Pa,[(0,n.Lk)("div",Sa,[(0,n.Lk)("h1",null,(0,L.v_)(s.fam.replaceAll("_"," "))+" Tune Family",1)]),(0,n.Lk)("div",Fa,[(0,n.bF)(r,{pageTitle:s.pageTitle},null,8,["pageTitle"])]),(0,n.Lk)("div",Ea,[(0,n.Lk)("div",Ua,[(0,n.Lk)("h5",null,'Tunes within the Tune Family "'+(0,L.v_)(s.fam.replaceAll("_"," "))+'"',1),s.tuneFamilyList.length>0?((0,n.uX)(),(0,n.CE)("table",Da,[Ia,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.tuneFamilyList,((t,e)=>((0,n.uX)(),(0,n.CE)("tr",{key:e,onClick:e=>o.openDetails(t.id.value)},[(0,n.Lk)("td",null,(0,L.v_)("title"in t&&t.title.value?t.title.value.replace(/^(.*?)(?:, The)$/,"The $1"):"Unknown"),1),(0,n.Lk)("td",null,(0,L.v_)(this.formatID(t.id.value)),1),(0,n.Lk)("td",null,(0,L.v_)("type"in t&&t.type.value?t.type.value:"Unknown"),1)],8,Ra)))),128))])])):(0,n.Q3)("",!0)])])])}var Ba={name:"TuneFamilyPage",components:{CitationGenerator:la},data(){return{fam:this.$route.params.fam,tuneFamilyList:[],pageTitle:""}},methods:{formatID(t){let e="";return e=t.includes("thesession")?"S":t.includes("MTC")?"M":t.split("/")[0].substring(0,3).toUpperCase(),e+t.split("/").pop()},getTuneFamilyMembers(t){let e={family:t};z.A.get("https://polifonia.disi.unibo.it/patterns/api/tuneFamilyMembers",{params:e}).then((t=>{this.tuneFamilyList=t.data.results.bindings})).catch((t=>{console.error(t)}))},openDetails(t){this.$router.push({name:"CompositionPage",params:{id:encodeURIComponent(t)}})}},mounted(){this.pageTitle=this.fam.replaceAll("_"," ")+" Tune Family",this.getTuneFamilyMembers(this.fam)}};const ja=(0,b.A)(Ba,[["render",Na]]);var Ga=ja,Ma=a.p+"img/eu.367616fc.jpg";const Oa=t=>((0,n.Qi)("data-v-d461e6de"),t=t(),(0,n.jt)(),t),Va={class:"container"},Xa=(0,n.Fv)('<div class="row" style="text-align:center;" data-v-d461e6de><h1 data-v-d461e6de>About</h1></div><div class="row my-5" style="text-align:center;" data-v-d461e6de><div class="col-12" data-v-d461e6de><h3 class="py-2 my-2" data-v-d461e6de>Patterns UI</h3><p data-v-d461e6de> The Patterns User Interface is a tool designed to allow exploration of European Traditional Music through a selection of search types, interactive network visualisations, tables and audio. A chosen subset of tunes can be identified using the search functions, the results of which link to a composition page dedicated to that tune. The composition page shows information about the selected tune as well as presenting a network visualisation through which related tunes can be found. More information about patterns of tune families can be obtained through clicking to navigate to that items dedicated page. </p><p data-v-d461e6de> Patterns UI and the Patterns UI Backend are open source projects licenced under the GNU General Public Licence version 3. The source code for each are available in the following Github repositories: <ul style="list-style-type:none;" data-v-d461e6de><li data-v-d461e6de><a href="https://github.com/polifonia-project/pattern-exploration-gui" data-v-d461e6de>Patterns UI</a></li><li data-v-d461e6de><a href="https://github.com/polifonia-project/pattern-explorations-backend" data-v-d461e6de>Patterns UI Backend</a></li></ul></p></div></div><div class="row my-5" style="text-align:center;" data-v-d461e6de><div class="col-12" data-v-d461e6de><h3 class="py-2 my-2" data-v-d461e6de>The Polifonia Project</h3><p data-v-d461e6de>Polifonia is a â¬3M project funded by the EU Horizon 2020 Programme conducted between January 2021 and April 2024 to recreate the connections between music, people, places and events from the sixteenth century to the modern day. These findings are be available to everyone as an interconnected global database on the web â a knowledge graph â and will enhance our understanding of European musical heritage. The Polifonia consortium is an interdisciplinary team of passionate researchers and music lovers: computer scientists, anthropologists and ethnomusicologists, historians of music, linguists, musical heritage archivists, cataloguers and administrators, and creative professionals.</p></div></div>',3),Ka={class:"row my-5",style:{"text-align":"center"}},za={class:"col-12"},Qa=Oa((()=>(0,n.Lk)("h3",{class:"py-2 my-2"},"SPARQL Endpoint and Sample Queries",-1))),qa=Oa((()=>(0,n.Lk)("p",null,"The Patterns User Interface uses the FONN patterns knowledge graph as well as portions of the TUNES music knowledge graph as a source of data. This database is available at the following endpoint: ",-1))),Ja=Oa((()=>(0,n.Lk)("p",null,[(0,n.Lk)("a",{href:"https://polifonia.disi.unibo.it/fonn/sparql"},"https://polifonia.disi.unibo.it/fonn/sparql")],-1))),$a=Oa((()=>(0,n.Lk)("div",{class:"row my-7 py-5",style:{"text-align":"center"}},[(0,n.Lk)("div",{class:"col-6"},[(0,n.Lk)("img",{width:"300px",src:Ma})]),(0,n.Lk)("div",{class:"col-6 eu"},[(0,n.Lk)("p",null,"This project has received funding from the European Unionâs Horizon 2020 research and innovation programme under grant agreement N. 101004746")])],-1)));function Wa(t,e,a,i,s,o){const r=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Va,[Xa,(0,n.Lk)("div",Ka,[(0,n.Lk)("div",za,[Qa,qa,Ja,(0,n.Lk)("p",null,[(0,n.eW)("Some example SPARQL queries are available "),(0,n.bF)(r,{to:"/queries"},{default:(0,n.k6)((()=>[(0,n.eW)("here")])),_:1}),(0,n.eW)(".")])])]),$a])}var Za={name:"AboutPage"};const Ha=(0,b.A)(Za,[["render",Wa],["__scopeId","data-v-d461e6de"]]);var Ya=Ha;const ti={class:"container"},ei=(0,n.Fv)('<div class="row"><h1>Sample SPARQL Queries</h1><p> The following query samples are for the purposes of demonstration and are not representative of the SPARQL queries used in the backend to this interface. The actual queries used can be found in the file &#39;query_factory.py&#39; in the <a href="https://github.com/polifonia-project/pattern-explorations-backend">backend source code</a>. The tune ID values presented in Patterns UI are shortened versions of those used in the TUNES knowledge graph and will not work in SPARQL queries. </p><p>The FONN SPARQL endpoint is available via web and API at <a href="https://polifonia.disi.unibo.it/fonn/sparql">https://polifonia.disi.unibo.it/fonn/sparql</a>.</p></div><div class="row my-5"><div class="col-12"><h3 class="py-2 my-2">Search for a Tune Title (Non-Fuzzy Search)</h3><div class="highlight"><pre>                        <code class="language-sparql">\nPREFIX jams:&lt;http://w3id.org/polifonia/ontology/jams/&gt;\nPREFIX mm:&lt;http://w3id.org/polifonia/ontology/music-meta/&gt;\nPREFIX core:&lt;http://w3id.org/polifonia/ontology/core/&gt;\nPREFIX rdf:&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;\nSELECT ?title ?tuneType ?key ?signature ?id\nWHERE {\n    ?tune rdf:type mm:MusicEntity.\n    ?tune core:title ?title.\n    VALUES (?title) { ( &quot;Drowsy Maggie&quot; ) }\n    ?tune core:id ?id.\n    OPTIONAL {?tune mm:hasFormType ?tuneTypeURI.\n    ?tuneTypeURI core:name ?tuneType.}\n    OPTIONAL {?tune mm:hasKey ?keyURI.\n    ?keyURI mm:tuneKeyName ?key.}\n    OPTIONAL {?tune jams:timeSignature ?signatureURI.\n    ?signatureURI mm:timesig ?signature.}\n} ORDER BY ?title ?id\n                        </code>\n                    </pre></div></div></div><div class="row my-5"><div class="col-12"><h3 class="py-2 my-2">Search for a Pattern</h3><div><pre>                        <code class="language-sparql">\nPREFIX jams:&lt;http://w3id.org/polifonia/ontology/jams/&gt;\nPREFIX mm:&lt;http://w3id.org/polifonia/ontology/music-meta/&gt;\nPREFIX core:&lt;http://w3id.org/polifonia/ontology/core/&gt;\nPREFIX xyz:&lt;http://sparql.xyz/facade-x/data/&gt;\nPREFIX rdf:&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;\nSELECT DISTINCT ?title ?tuneType ?key ?signature ?id\nWHERE\n{\n    ?obs jams:ofPattern ?patternURI.\n    ?patternURI xyz:pattern_content &quot;1, 1, 1, 1&quot;.\n    ?annotation jams:includesObservation ?obs.\n    ?annotation jams:isJAMSAnnotationOf ?tune.\n    ?tune rdf:type mm:MusicEntity.\n    ?tune core:id ?id.\n    OPTIONAL {?tune core:title ?title}\n    OPTIONAL {?tune mm:hasFormType ?tuneTypeURI.\n       ?tuneTypeURI core:name ?tuneType.}\n    OPTIONAL {?tune mm:hasKey ?keyURI.\n       ?keyURI mm:tuneKeyName ?key.}\n    OPTIONAL {?tune jams:timeSignature ?signatureURI.\n       ?signatureURI mm:timesig ?signature.}\n} ORDER BY ?title ?id\n                        </code>\n                    </pre></div></div></div><div class="row my-5"><div class="col-12"><h3 class="py-2 my-2">Find the Ten Most Frequent Patterns within a Tune</h3><div><pre>                        <code class="language-sparql">\nPREFIX jams:&lt;http://w3id.org/polifonia/ontology/jams/&gt;\nPREFIX core:&lt;http://w3id.org/polifonia/ontology/core/&gt;\nPREFIX xyz:&lt;http://sparql.xyz/facade-x/data/&gt;\nPREFIX rdf:&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;\nPREFIX mm:&lt;http://w3id.org/polifonia/ontology/music-meta/&gt;\n\nSELECT ?pattern (count(?pattern) as ?patternFreq)\nWHERE {\n    ?tune rdf:type mm:MusicEntity.\n    ?tune core:id &quot;thesession20211212/MusicEntity/12406&quot;.\n    ?annotation jams:isJAMSAnnotationOf ?tune.\n    ?annotation jams:includesObservation ?observation.\n    ?observation jams:ofPattern ?patternURI.\n    ?patternURI xyz:pattern_content ?pattern.\n} GROUP BY ?pattern\nORDER BY DESC (?patternFreq) ?pattern LIMIT 10\n                        </code>\n                    </pre></div></div></div>',4),ai=[ei];function ii(t,e,a,i,s,o){return(0,n.uX)(),(0,n.CE)("div",ti,ai)}var ni=a(1017),si=a.n(ni),oi=(a(7083),a(7854),{name:"sampleSPARQLQueries",mounted(){si().highlightAll()}});const ri=(0,b.A)(oi,[["render",ii]]);var li=ri;const di=[{path:"/",name:"HomeSearchPage",component:Vt},{path:"/composition/:id/:prev?/:prevTitle?",name:"CompositionPage",component:pa,props:!0},{path:"/pattern/:pattern",name:"PatternPage",component:Aa,props:!0},{path:"/family/:fam",name:"TuneFamilyPage",component:Ga,props:!0},{path:"/about",name:"AboutPage",component:Ya,props:!1},{path:"/queries",name:"sampleSPARQLQueries",component:li,props:!1}],ci=(0,H.aE)({history:(0,H.LA)("/patterns/"),routes:di,scrollBehavior(t,e,a){return"sampleSPARQLQueries"===t.name||"AboutPage"===t.name?{top:0}:a}});var pi=ci,ui=a(5707),hi=a.n(ui);(0,i.Ef)(Z).use(pi).use(hi()).mount("#app")}},e={};function a(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,i,n,s){if(!i){var o=1/0;for(c=0;c<t.length;c++){i=t[c][0],n=t[c][1],s=t[c][2];for(var r=!0,l=0;l<i.length;l++)(!1&s||o>=s)&&Object.keys(a.O).every((function(t){return a.O[t](i[l])}))?i.splice(l--,1):(r=!1,s<o&&(o=s));if(r){t.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[i,n,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/patterns/"}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,s,o=i[0],r=i[1],l=i[2],d=0;if(o.some((function(e){return 0!==t[e]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(l)var c=l(a)}for(e&&e(i);d<o.length;d++)s=o[d],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(c)},i=self["webpackChunkpolifonia_frontend"]=self["webpackChunkpolifonia_frontend"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[504],(function(){return a(9814)}));i=a.O(i)})();
//# sourceMappingURL=app.24c26b5e.js.map